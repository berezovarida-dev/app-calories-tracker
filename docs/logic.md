# –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞: –¢—Ä–µ–∫–µ—Ä –∫–∞–ª–æ—Ä–∏–π

## –û–±–∑–æ—Ä

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞ –∫–∞–ª–æ—Ä–∏–π, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –Ω–∞ React + TypeScript + Vite —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Supabase –≤ –∫–∞—á–µ—Å—Ç–≤–µ backend. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∏—â–∏, —Ñ–∏–∑–∏—á–µ—Å–∫—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –≤–æ–¥—ã –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π –±–∞–ª–∞–Ω—Å.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Frontend**: React 19, TypeScript, Vite
- **Backend**: Supabase (PostgreSQL, Auth, Storage)
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏**:
  - `@supabase/supabase-js` - –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Supabase
  - `@zxing/library` - —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —à—Ç—Ä–∏—Ö–∫–æ–¥–æ–≤
- **–í–Ω–µ—à–Ω–∏–µ API**: Open Food Facts –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–¥—É–∫—Ç–∞—Ö

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ components/          # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ hooks/              # –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ö—É–∫–∏
‚îú‚îÄ‚îÄ utils/              # –£—Ç–∏–ª–∏—Ç—ã –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ AppSimple.tsx       # –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ supabaseClient.ts   # –ö–ª–∏–µ–Ω—Ç Supabase
‚îî‚îÄ‚îÄ main.tsx            # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (`AuthScreen`)

**–õ–æ–≥–∏–∫–∞:**
- –†–µ–∞–ª–∏–∑—É–µ—Ç –≤—Ö–æ–¥ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ Supabase Auth
- –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ —Ç—Ä–∏–≥–≥–µ—Ä –≤ –ë–î
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–π email, –Ω–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)

**–•—É–∫ `useAuth`:**
- –£–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã `signIn`, `signUp`, `signOut`
- –ü—Ä–∏ –≤—Ö–æ–¥–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –∏ —Å–æ–∑–¥–∞—ë—Ç –µ–≥–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ (–¥–ª—è —Å—Ç–∞—Ä—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

### 2. –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω (`AppSimple`)

**–¢—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –≤–∫–ª–∞–¥–∫–∏:**

#### –í–∫–ª–∞–¥–∫–∞ "–°–µ–≥–æ–¥–Ω—è" (Today)
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –±–∞–ª–∞–Ω—Å –∫–∞–ª–æ—Ä–∏–π –∑–∞ –¥–µ–Ω—å
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—Ç—Ä–µ–±–ª—ë–Ω–Ω—ã–µ –∏ —Å–æ–∂–∂—ë–Ω–Ω—ã–µ –∫–∞–ª–æ—Ä–∏–∏
- –í–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –∫ —Ü–µ–ª–∏
- –°–ø–∏—Å–æ–∫ –ø—Ä–∏—ë–º–æ–≤ –ø–∏—â–∏ –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
- –¢—Ä–µ–∫–∏–Ω–≥ –≤–æ–¥—ã —Å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è–º–∏

**–†–∞—Å—á—ë—Ç –±–∞–ª–∞–Ω—Å–∞:**
```typescript
balance = consumed - burned
progress = balance / target
```

**–¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è:**
- –ó–µ–ª—ë–Ω—ã–π: –±–∞–ª–∞–Ω—Å ‚â§ 90% –æ—Ç —Ü–µ–ª–∏
- –ñ—ë–ª—Ç—ã–π: –±–∞–ª–∞–Ω—Å 90-110% –æ—Ç —Ü–µ–ª–∏
- –ö—Ä–∞—Å–Ω—ã–π: –±–∞–ª–∞–Ω—Å > 110% –æ—Ç —Ü–µ–ª–∏

#### –í–∫–ª–∞–¥–∫–∞ "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞" (Analytics)
- –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å –æ—Ç–º–µ—Ç–∫–∞–º–∏ –æ –µ–¥–µ, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ –≤–æ–¥–µ
- –°–≤–æ–¥–∫–∞ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –¥–µ–Ω—å
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –º–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ (–∑–∞–≥–ª—É—à–∫–∞)

#### –í–∫–ª–∞–¥–∫–∞ "–ü—Ä–æ—Ñ–∏–ª—å" (Profile)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ü–µ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ–ª–∞ (—Ä–æ—Å—Ç, –≤–µ—Å, —Ü–µ–ª—å)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —è–∑—ã–∫–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- –í—ã—Ö–æ–¥ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π

**FAB (Floating Action Button)** –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –æ–ø—Ü–∏—è–º–∏:
- üì∑ –§–æ—Ç–æ –µ–¥—ã
- üèÉ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- ‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ (–∑–∞–≥–ª—É—à–∫–∞)
- üïí –ù–µ–¥–∞–≤–Ω–∏–µ (–∑–∞–≥–ª—É—à–∫–∞)

### 4. –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —à—Ç—Ä–∏—Ö–∫–æ–¥–æ–≤ (`BarcodeScanner`)

**–õ–æ–≥–∏–∫–∞:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É `@zxing/library` –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —à—Ç—Ä–∏—Ö–∫–æ–¥–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–º–µ—Ä—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ –∑–∞–¥–Ω—è—è –∫–∞–º–µ—Ä–∞)
- –í–∞–ª–∏–¥–∞—Ü–∏—è EAN-13 —à—Ç—Ä–∏—Ö–∫–æ–¥–æ–≤ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—É—é —Å—É–º–º—É
- –ú–µ—Ö–∞–Ω–∏–∑–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è: —Ç—Ä–µ–±—É–µ—Ç 2 –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –æ–¥–Ω–æ–≥–æ —à—Ç—Ä–∏—Ö–∫–æ–¥–∞
- Fallback –Ω–∞ —Ä—É—á–Ω–æ–π –≤–≤–æ–¥ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –∫–∞–º–µ—Ä—ã

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ iOS (playsinline, muted)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è

### 5. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–¥—É–∫—Ç–µ (`ProductInfo`)

**–õ–æ–≥–∏–∫–∞:**
- –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø—Ä–æ–¥—É–∫—Ç–µ –∏–∑ Open Food Facts API
- –ü–æ–∑–≤–æ–ª—è–µ—Ç —É–∫–∞–∑–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ –µ–¥–∏–Ω–∏—Ü—É –∏–∑–º–µ—Ä–µ–Ω–∏—è (–≥/–º–ª)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ë–ñ–£ –Ω–∞ –æ—Å–Ω–æ–≤–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞

**–†–∞—Å—á—ë—Ç –ø–∏—Ç–∞—Ç–µ–ª—å–Ω—ã—Ö –≤–µ—â–µ—Å—Ç–≤:**
```typescript
multiplier = amount / 100
kcal = product.kcalPer100g * multiplier
protein = product.proteinPer100g * multiplier
fat = product.fatPer100g * multiplier
carbs = product.carbsPer100g * multiplier
```

**–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:**
- –°–æ–∑–¥–∞—ë—Ç –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ `daily_entries`
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Ä–µ–º—è –ø—Ä–∏—ë–º–∞ –ø–∏—â–∏
- –î–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ —Å –±—Ä–µ–Ω–¥–æ–º –ø—Ä–æ–¥—É–∫—Ç–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)

### 6. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ (`PhotoUpload`)

**–õ–æ–≥–∏–∫–∞:**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ –∏–∑ –≥–∞–ª–µ—Ä–µ–∏ –∏–ª–∏ —Å—ä—ë–º–∫–∏ —á–µ—Ä–µ–∑ –∫–∞–º–µ—Ä—É
- –ü–æ–∏—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —á–µ—Ä–µ–∑ Open Food Facts
- –ü–æ–∏—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–∞ –ø–æ —à—Ç—Ä–∏—Ö–∫–æ–¥—É (—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–æ—Ç–æ –≤ Supabase Storage (bucket `food-photos`)
- Fallback –Ω–∞ base64, –µ—Å–ª–∏ Storage –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç/–¥–µ–ª–∞–µ—Ç —Ñ–æ—Ç–æ
2. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –∏—â–µ—Ç –ø—Ä–æ–¥—É–∫—Ç –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ —à—Ç—Ä–∏—Ö–∫–æ–¥—É
3. –£–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
4. –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ë–ñ–£
5. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∑–∞–ø–∏—Å—å –≤ `daily_entries` —Å —Å—Å—ã–ª–∫–æ–π –Ω–∞ —Ñ–æ—Ç–æ

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
- –ï—Å–ª–∏ –ø—Ä–æ–¥—É–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω, –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–æ—Ç–æ –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö –æ –∫–∞–ª–æ—Ä–∏—è—Ö
- –ï—Å–ª–∏ –∫–∞–ª–æ—Ä–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–∞ = 0, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

### 7. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (`ActivityAdd`)

**–õ–æ–≥–∏–∫–∞:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö MET (Metabolic Equivalent of Task)
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–±—Ä–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏–ª–∏ –Ω–∞–π—Ç–∏ —á–µ—Ä–µ–∑ –ø–æ–∏—Å–∫
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–∞–ª–æ—Ä–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ MET, –≤–µ—Å–∞ –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–†–∞—Å—á—ë—Ç –∫–∞–ª–æ—Ä–∏–π:**
```typescript
calories = MET √ó weight (kg) √ó duration (hours)
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ï—Å–ª–∏ –≤–µ—Å –Ω–µ —É–∫–∞–∑–∞–Ω –≤ –ø—Ä–æ—Ñ–∏–ª–µ, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω—ã–π —Ä–∞—Å—á—ë—Ç (70 –∫–≥)
- –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–ª–æ—Ä–∏–∏ –≤—Ä—É—á–Ω—É—é
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ —Ç–∞–±–ª–∏—Ü—É `activities`

**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π:**
- –•–æ–¥—å–±–∞
- –ë–µ–≥
- –í–µ–ª–æ—Å–∏–ø–µ–¥
- –ü–ª–∞–≤–∞–Ω–∏–µ
- –°–∏–ª–æ–≤—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
- –ô–æ–≥–∞ –∏ —Ä–∞—Å—Ç—è–∂–∫–∞
- –¢–∞–Ω—Ü—ã
- –°–ø–æ—Ä—Ç
- –ü–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–µ

### 8. –¢—Ä–µ–∫–∏–Ω–≥ –≤–æ–¥—ã

**–õ–æ–≥–∏–∫–∞:**
- –•—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `daily_states`
- –ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏: +100 –º–ª, +200 –º–ª, +300 –º–ª
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∫–∞–∂–¥—ã–µ 2 —á–∞—Å–∞ (–µ—Å–ª–∏ –≤–æ–¥–∞ –Ω–µ –¥–æ–±–∞–≤–ª—è–ª–∞—Å—å)
- –ó–≤—É–∫–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–∏

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
- –ï—Å–ª–∏ –ø—Ä–æ—à–ª–æ ‚â• 2 —á–∞—Å–æ–≤ —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤–æ–¥—ã ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –±–∞–Ω–Ω–µ—Ä
- –ó–≤—É–∫ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ Web Audio API

## –•—É–∫–∏ (Hooks)

### `useAuth`
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π:
- –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Å–µ—Å—Å–∏–∏
- –ú–µ—Ç–æ–¥—ã –≤—Ö–æ–¥–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–≤—ã—Ö–æ–¥–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### `useProfile`
–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
- –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `profiles`
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –ø—Ä–æ—Ñ–∏–ª—è (–¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

### `useTodayData`
–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –¥–µ–Ω—å:
- –ü—Ä–∏—ë–º—ã –ø–∏—â–∏ –∏–∑ `daily_entries`
- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏–∑ `activities`
- –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–Ω—è (–≤–æ–¥–∞) –∏–∑ `daily_states`
- –¶–µ–ª—å –∫–∞–ª–æ—Ä–∏–π –∏–∑ `profiles`
- –†–∞—Å—á—ë—Ç –ø–æ—Ç—Ä–µ–±–ª—ë–Ω–Ω—ã—Ö, —Å–æ–∂–∂—ë–Ω–Ω—ã—Ö –∫–∞–ª–æ—Ä–∏–π –∏ –±–∞–ª–∞–Ω—Å–∞
- –ú–µ—Ç–æ–¥ `refetch` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

## –£—Ç–∏–ª–∏—Ç—ã

### `openFoodFacts.ts`
–†–∞–±–æ—Ç–∞ —Å Open Food Facts API:
- `fetchProductByBarcode` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ –ø–æ —à—Ç—Ä–∏—Ö–∫–æ–¥—É
- `searchProductsByName` - –ø–æ–∏—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –ë–ñ–£
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö API

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –∫–∞–ª–æ—Ä–∏–π (–∫–∫–∞–ª, –∫–î–∂)
- –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –ë–ñ–£ –¥–æ 1 –∑–Ω–∞–∫–∞ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### `activityMET.ts`
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö MET –∑–Ω–∞—á–µ–Ω–∏–π:
- –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π —Å MET –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
- –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á—ë—Ç–∞ –∫–∞–ª–æ—Ä–∏–π: `calculateCaloriesBurned`
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º: `getActivitiesByCategory`
- –ü–æ–∏—Å–∫ –ø–æ ID: `getActivityById`

## –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏—ë–º–∞ –ø–∏—â–∏ —á–µ—Ä–µ–∑ —à—Ç—Ä–∏—Ö–∫–æ–¥:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç FAB ‚Üí –≤—ã–±–∏—Ä–∞–µ—Ç "–®—Ç—Ä–∏—Ö–∫–æ–¥"
2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è `BarcodeScanner`
3. –°–∫–∞–Ω–∏—Ä—É–µ—Ç—Å—è —à—Ç—Ä–∏—Ö–∫–æ–¥ ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `handleBarcodeScanned`
4. –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–æ–¥—É–∫—Ç —á–µ—Ä–µ–∑ `fetchProductByBarcode`
5. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è `ProductInfo` —Å –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–æ–¥—É–∫—Ç–∞
6. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ –≤—Ä–µ–º—è
7. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `daily_entries`
8. –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `refetchToday`

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç FAB ‚Üí –≤—ã–±–∏—Ä–∞–µ—Ç "–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å"
2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è `ActivityAdd`
3. –í—ã–±–∏—Ä–∞–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏–∑ —Å–ø–∏—Å–∫–∞ –∏–ª–∏ —á–µ—Ä–µ–∑ –ø–æ–∏—Å–∫
4. –£–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
5. –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–∞–ª–æ—Ä–∏–∏ (MET √ó –≤–µ—Å √ó –≤—Ä–µ–º—è)
6. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `activities`
7. –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `refetchToday`

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–æ–¥—ã:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É (+100/200/300 –º–ª)
2. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `handleAddWater`
3. –ü–æ–ª—É—á–∞–µ—Ç—Å—è —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ `daily_states`
4. –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
5. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `upsert` –≤ `daily_states`
6. –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `refetchToday`

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- Row Level Security (RLS) –≤–∫–ª—é—á—ë–Ω –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ `auth.uid() = user_id` –≤ –ø–æ–ª–∏—Ç–∏–∫–∞—Ö –¥–æ—Å—Ç—É–ø–∞
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –¥–∞–Ω–Ω—ã–º–∏

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î –æ–±—ë—Ä–Ω—É—Ç—ã –≤ try-catch
- –ü–æ–∫–∞–∑ –ø–æ–Ω—è—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- Graceful degradation (–Ω–∞–ø—Ä–∏–º–µ—Ä, base64 –≤–º–µ—Å—Ç–æ Storage)

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ `user_id` –∏ –¥–∞—Ç–∞—Ö –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI (–¥–ª—è –≤–æ–¥—ã)
- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Supabase

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤–∫–ª–∞–¥–∫–∏ "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞" —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
- –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –∏ –Ω–µ–¥–∞–≤–Ω–∏–µ –∑–∞–ø–∏—Å–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ–∏—Ç–Ω–µ—Å-—Ç—Ä–µ–∫–µ—Ä–∞–º–∏
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- PWA —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (service worker —É–∂–µ –µ—Å—Ç—å)

